<main
  class="flex-1 overflow-y-auto min-h-screen p-4 md:p-8 bg-gradient-to-br from-blue-500 via-cyan-500 to-blue-600 text-white"
>
  <!-- Header -->
  
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
      <h2 class="text-2xl font-bold text-white mb-3 md:mb-0">ðŸš› <span>Route Management</span></h2>
      <button
        (click)="openForm()"
        class="px-4 py-2 bg-white text-blue-600 font-semibold rounded-lg shadow-md hover:bg-blue-50 transition"
      >
        + Add Route
      </button>
    </div>

  <!-- Table Section -->
  <div
    class="bg-white/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-xl p-4 md:p-6 overflow-x-auto"
  >
    <table class="min-w-full text-left text-sm md:text-base">
      <thead>
        <tr class="border-b border-white/20 text-white/80">
          <th class="p-2">Route</th>
          <th class="p-2">Start</th>
          <th class="p-2">End</th>
          <th class="p-2 hidden md:table-cell">Driver</th>
          <th class="p-2 hidden md:table-cell">Vehicle</th>
          <th class="p-2 text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let r of routes"
          class="border-b border-white/10 hover:bg-white/10 transition-all duration-200"
        >
          <td class="p-2">{{ r.name }}</td>
          <td class="p-2">{{ r.startLocation }}</td>
          <td class="p-2">{{ r.endLocation }}</td>
          <td class="p-2 hidden md:table-cell">{{ r.driver }}</td>
          <td class="p-2 hidden md:table-cell">{{ r.vehicle }}</td>
          <td class="p-2 text-center space-x-3">
            <button
              (click)="openForm(r)"
              class="text-yellow-300 hover:text-yellow-200 transition"
            >
              Edit
            </button>
            <button
              (click)="deleteRoute(r.id)"
              class="text-red-300 hover:text-red-200 transition"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <p *ngIf="routes.length === 0" class="text-center text-white/70 mt-4">
      No routes added yet.
    </p>
  </div>

  <!-- Modal -->
  <div
    *ngIf="showForm"
    class="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50 z-[9999]"
  >
    <div
      class="bg-white rounded-xl p-6 h-full overflow-x-auto w-11/12 sm:w-3/4 md:w-1/2 lg:w-1/2 shadow-2xl"
    >
      <h3 class="text-xl font-semibold text-blue-700 mb-4">
        {{ editMode ? 'Edit Route' : 'Add New Route' }}
      </h3>

      <form (ngSubmit)="saveRoute()" class="space-y-4">
        <div class="grid grid-cols-1 gap-3">
          <div>
            <label class="text-sm font-semibold text-gray-300">Route Name</label>
            <input
              type="text"
              [(ngModel)]="formData.name"
              name="name"
              placeholder="Enter Route Name"
              class="p-2 border border-gray-300 rounded-md w-full text-gray-700"
              required
            />
          </div>

          <div>
            <label class="text-sm font-semibold text-gray-300">Vendor / Company</label>
            <input
              type="text"
              [(ngModel)]="formData.vendor"
              name="vendor"
              placeholder="Enter Vendor / Company"
              class="p-2 border border-gray-300 rounded-md w-full text-gray-700"
            />
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="text-sm font-semibold text-gray-300">Start Location</label>
            <input
              type="text"
              [(ngModel)]="formData.startLocation"
              name="startLocation"
              placeholder="Enter Start Location"
              class="p-2 border border-gray-300 rounded-md w-full text-gray-700"
            />
          </div>

          <div>
            <label class="text-sm font-semibold text-gray-300">End Location</label>
            <input
              type="text"
              [(ngModel)]="formData.endLocation"
              name="endLocation"
              placeholder="Enter End Location"
              class="p-2 border border-gray-300 rounded-md w-full text-gray-700"
            />
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="text-sm font-semibold text-gray-300">Driver</label>
            <select
              [(ngModel)]="formData.driver"
              name="driver"
              class="p-2 border border-gray-300 rounded-md w-full text-gray-700"
            >
              <option value="" disabled>Select Driver</option>
              <option *ngFor="let driver of drivers" [value]="driver.name">{{ driver.name }}</option>
            </select>
          </div>

          <div>
            <label class="text-sm font-semibold text-gray-300">Vehicle</label>
            <select
              [(ngModel)]="formData.vehicle"
              name="vehicle"
              class="p-2 border border-gray-300 rounded-md w-full text-gray-700"
            >
              <option value="" disabled>Select Vehicle</option>
              <option *ngFor="let v of vehicles" [value]="v.name">{{ v.name }}</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
          <div>
            <label class="text-sm font-semibold text-gray-300">Start Date</label>
            <input
              type="date"
              [(ngModel)]="formData.startDate"
              name="startDate"
              class="p-2 border border-gray-300 rounded-md w-full text-gray-700"
            />
          </div>

          <div>
            <label class="text-sm font-semibold text-gray-300">Start Time</label>
            <input
              type="time"
              [(ngModel)]="formData.startTime"
              name="startTime"
              class="p-2 border border-gray-300 rounded-md w-full text-gray-700"
            />
          </div>

          <div>
            <label class="text-sm font-semibold text-gray-300">End Time</label>
            <input
              type="time"
              [(ngModel)]="formData.endTime"
              name="endTime"
              class="p-2 border border-gray-300 rounded-md w-full text-gray-700"
            />
          </div>
        </div>

        <!-- Checkpoints -->
        <div>
          <label class="text-sm font-semibold text-gray-300">Checkpoints</label>
          <div class="flex space-x-2 mt-1">
            <input
              type="text"
              [(ngModel)]="checkpointInput"
              name="checkpoint"
              placeholder="Add checkpoint"
              class="flex-1 p-2 rounded-md bg-white/10 border border-gray-300 text-gray-700 placeholder-gray-400 focus:ring-2 focus:ring-blue-400"
            />
            <button
              type="button"
              (click)="addCheckpoint()"
              class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-md transition-all duration-200"
            >
              +
            </button>
          </div>
          <div class="mt-2 flex flex-wrap gap-2">
            <span
              *ngFor="let point of formData.checkpoints"
              class="bg-blue-600/30 border border-blue-400 text-black px-2 py-1 rounded-md text-sm"
            >
              {{ point }}
            </span>
          </div>
        </div>

        <div>
          <label class="text-sm font-semibold text-gray-300">Notes</label>
          <textarea
            [(ngModel)]="formData.notes"
            name="notes"
            rows="2"
            placeholder="Add any notes..."
            class="mt-1 p-2 w-full rounded-md bg-white/10 border border-gray-300 text-gray-700 placeholder-gray-400 focus:ring-2 focus:ring-blue-400"
          ></textarea>
        </div>

        <div class="flex justify-end space-x-3 mt-4">
          <button
            type="button"
            (click)="closeForm()"
            class="px-4 py-2 bg-gray-500/40 hover:bg-gray-500/60 text-gray-100 rounded-md transition-all"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md shadow-md transition-all"
          >
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
</main>
